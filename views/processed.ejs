<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
		<title>food vibes</title>
		<link rel="stylesheet" href="style.css">
    </head>
    <body>
    <script>
        const key = "b9144087445642548997f02c574886f9";
        var rit_store_number = 62;
        var hip_hop = ["Sweet Baby Ray's Original", "Sprite", "Takis", "Mac&amp:Cheese"]

        async function findFoods(foods) { //gets SKUs from list of foods
            var stuffs = [];
            for (let food of foods) {
                let skuu = await axios.get(`https://api.wegmans.io/products/search?query=${food}&api-version=2018-10-18&Subscription-Key=${key}`)
                console.log(skuu.data.results[0]);
                let stuff = parseInt(skuu.data.results[0].sku);
                stuffs.push(stuff);
                console.log(stuff);
            }
            console.log(stuffs);
            for (let thing of stuffs) { //gets aisle location for each item
                console.log(thing)
                let location = await findlocation(thing, 62);
                console.log(location);
            }
        }
        async function findlocation(sku, store) { //gets aisle locations

            let location = await makeGetRequest(`https://api.wegmans.io/products/${sku}/locations/${store}?api-version=2018-10-18&subscription-key=${key}`)
            var stringystring = location;
            console.log(stringystring);
            document.getElementById("food").innerHTML = JSON.stringify(stringystring);
            return stringystring;
        }

        async function makeGetRequest(url) {
            let res = await axios.get(url);
            let data = res.data.locations[0];
            return data;
        }
        findFoods(hip_hop);

    </script>
        <div class="center-div">
            <h1>food vibes</h1>
            <h1>your song</h1>
            <h2 id="song-name">name: <%= songname%></h2>
            <h2 id="song-artist">artist: <%= songartist%></h2>
            <h2 id="song-genre">genre: <%= songgenre%></h2>
            <h1>press for your recommendations</h1>
            <h1 id="food"></h1>
        </div>
        <div class="center-div song-info">

        </div>
        <div class="center-div">

        </div>
    </body>
</html>
